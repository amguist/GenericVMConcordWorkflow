configuration:
  dependencies:

  arguments:
    concordPid: ${txId}
    concordServerUrl: "http://localhost:8001/#/process"

  meta:
    artifactId: ""
    version: ""
    completedStage: ""

flows:
  default:
    - log: "Process ID is ${concordPid}"
    - form: deploymentForm
    - set:
        groupId: ${deploymentForm.groupId}
        artifactId: ${deploymentForm.artifactId}
        version: ${deploymentForm.version}
        environment: ${deploymentForm.environment}
    - switch: ${environment}
      Development:
        - log: "************************************************************************************************"
        - log: "** Initiating Deployment Prerequisites to deploy to [ ${environment} ]                       ** "
        - log: "************************************************************************************************"
        - form: developmentForm
        - set:
            businessUnit: ${developmentForm.businessUnit}
            serverUrl: ${developmentForm.serverAddress}
        - call: targetDeployment
      default:
        - log: "Environment will be: ${environment}"

  targetDeployment:
    - log: "You are here"

forms:
  deploymentForm:
    - groupId: { label: "Group Identifier", type: "string", placeholder: "Input Artifact Group Identifier"}
    - artifactId: { label: "Artifact Identifier", type: "string", placeholder: "Input Artifact Group Identifier"}
    - version: { label: "Artifact Version", type: "string", placeholder: "Input Artifact Version"}
    - environment: { label: "Environment", type: "string", placeholder: "Select Environment Type", allow: ["Development","QA","Stage","Performance","Production"]}

  developmentForm:
    - businessUnit: { label: "Business Unit", type: "string", placeholder: "Input Business Unit(s)"}
    - serverAddress: { label: "Server Address", type: "string", placeholder: "Input Server Address(es)"}

